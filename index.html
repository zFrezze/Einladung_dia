<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Einladungskarte Animation</title>
  <style>
    /* Grundlayout und Hintergrund */
    body {
      margin: 0;
      background: #e0e0e0; /* neutraler Hintergrund (entspricht dem Umschlag-Hintergrund) */
      overflow: hidden;    /* verhindert Scrollen während Animation */
    }
    .wrapper {
      position: relative;
      width: 100%;
      height: 100vh;
      perspective: 800px;           /* Perspektive für 3D-Effekte (Umschlag & Karte) */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Umschlag und Siegel */
    .envelope-container {
      position: absolute;
      top: 60%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 600px;                /* angenommene Breite des Umschlags */
      height: 400px;               /* angenommene Höhe des Umschlags */
      transform-style: preserve-3d;/* Kinder in 3D-Raum (für die Hälften) */
    }
    .envelope-half {
      position: absolute;
      top: 0;
      width: 50%;
      height: 100%;
      overflow: hidden;           /* nur eigener Bereich sichtbar (Bild wird halbiert) */
    }
    .envelope-half .envelope-img {
      position: absolute;
      top: 0;
      /* volles Bild einfügen; durch Container-Hälfte und overflow:hidden wird es halb sichtbar */
      /* keine Skalierung, wir nutzen das Originalbild und schneiden es durch Container zu */
    }
    .left-half {
      left: 0;
      transform-origin: 100% 50%; /* rechter Rand als Drehachse (Scharnier) */
    }
    .left-half .envelope-img {
      left: 0;                    /* linke Hälfte des Bildes im linken Container sichtbar */
    }
    .right-half {
      right: 0;
      transform-origin: 0% 50%;   /* linker Rand als Drehachse (Scharnier) */
    }
    .right-half .envelope-img {
      right: 0;                   /* rechte Hälfte des Bildes im rechten Container sichtbar */
    }
    .seal {
      position: absolute;
      width: 60px;
      height: 60px;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 2;                 /* über den Umschlagteilen und Karte */
      cursor: pointer;            /* Klickbarer Bereich für Start */
    }

    /* Karte (Vorder- und Rückseite) */
    .card-container {
      position: absolute;
      top: 60%; 
      left: 50%;
      transform: translate(-50%, -50%);
      transform-style: preserve-3d;  /* ermöglicht 3D-Drehung der Kinder */
      z-index: 1;                    /* unter Umschlagteilen anfangs */
    }
    .card-container img {
      display: block;
      width: auto;
      height: auto;
      /* Die tatsächliche Größe der Karte wird durch die Bildgröße bestimmt */
    }
    .card.front {
      /* Vorderseite der Karte */
      backface-visibility: hidden;   /* Rückseite ausblenden, wenn umgedreht */
    }
    .card.back {
      position: absolute;
      top: 0;
      left: 0;
      backface-visibility: hidden;
      transform: rotateY(180deg);    /* Rückseite initial 180° gedreht (unsichtbar) */
    }
  </style>
</head>
<body>

  <div class="wrapper">
    <!-- Umschlag (zweigeteilt in zwei Hälften) mit Siegel -->
    <div class="envelope-container">
      <div class="envelope-half left-half">
        <img src="envelope.jpg" alt="Umschlag links" class="envelope-img" />
      </div>
      <div class="envelope-half right-half">
        <img src="envelope.jpg" alt="Umschlag rechts" class="envelope-img" />
      </div>
      <img src="seal.png" alt="Wachssiegel" class="seal" />
    </div>
    <!-- Karte mit Vorder- und Rückseite -->
    <div class="card-container">
      <img src="diamond.jpg" alt="Einladungskarte Vorderseite" class="card front" />
      <img src="diamond_2.png" alt="Einladungskarte Rückseite" class="card back" />
    </div>
  </div>

  <!-- GSAP CDN einbinden -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script>
    // Initiale Einstellungen für 3D-Elemente
    gsap.set(".envelope-img", { backfaceVisibility: "hidden" }); // Rückseite der Umschlaghälften ausblenden
    gsap.set(".card-container", { transformStyle: "preserve-3d" }); // Sicherstellen, dass Karte 3D-transformierbar ist
    gsap.set(".card.back", { rotationY: 180 }); // Rückseitenbild 180° gedreht (zeigt nach "hinten")

    // GSAP Timeline für die gesamte Sequenz
    const tl = gsap.timeline({ paused: true });

    // 1. Siegel zerbricht (skaliert und verblasst schnell)
    tl.to(".seal", { duration: 0.3, opacity: 0, scale: 0, ease: "power1.in" })
      // 2. Umschlag klappt in zwei Hälften auf
      .to(".left-half",  { duration: 0.5, rotationY: -90, ease: "power2.in" }, "+=0")
      .to(".right-half", { duration: 0.5, rotationY:  90, ease: "power2.in" }, "<")  // "<" startet zeitgleich mit linker Hälfte
      // 3. Karte fliegt nach oben und wird zentriert (leicht überlappend während Umschlag sich öffnet)
      .to(".card-container", { duration: 0.8, top: "50%", ease: "power2.out", scale: 1 }, "-=0.3")
      // 4. Automatischer Flip zur Rückseite nach 1,5s Wartezeit
      .to(".card-container", { duration: 1.0, rotationY: 180, ease: "power2.inOut" }, "+=1.5");

    // Timeline durch Klick auf das Siegel starten
    document.querySelector(".seal").addEventListener("click", function() {
      tl.play();
    });
  </script>
</body>
</html>
